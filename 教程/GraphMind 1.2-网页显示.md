
# ğŸ“š GraphMind 1.2-ç½‘é¡µæ˜¾ç¤º
> ä¸­æ–‡çŸ¥è¯†å›¾è°±è‡ªåŠ¨ç”Ÿæˆå·¥å…·ï¼ˆåŸºäºæ ‡é¢˜å±‚çº§ï¼‰

## ğŸ¯ é¡¹ç›®ç›®æ ‡

æ—¨åœ¨ä»å¤šä¸ªå¸¦æœ‰å±‚çº§æ ‡é¢˜ç»“æ„çš„ä¸­æ–‡ CSV æ–‡æ¡£ä¸­æå–æ®µè½æ ‡é¢˜ï¼Œå¹¶æ ¹æ®å…¶å±‚çº§ç»“æ„ï¼ˆå¦‚ 1ã€1.1ã€1.1.1ï¼‰æ„å»ºå¯äº¤äº’å¼çš„çŸ¥è¯†å›¾è°±ï¼Œç”¨ä»¥å±•ç¤ºæ–‡æ¡£ç»“æ„ã€æ®µè½éš¶å±å…³ç³»å’Œè¯­ä¹‰ç»„ç»‡ã€‚

é€šè¿‡äº¤äº’å¼å›¾è°±ï¼ˆåŸºäº PyVis å®ç°ï¼‰ï¼Œç”¨æˆ·å¯ä»¥ï¼š

- ç›´è§‚æµè§ˆæ–‡æ¡£ç»“æ„
- å±•å¼€æˆ–æŠ˜å ä»»æ„å±‚çº§
- æŸ¥çœ‹æ¯ä¸ªæ®µè½çš„å†…å®¹ï¼ˆé¼ æ ‡æ‚¬åœï¼‰
- æ”¯æŒå¤šæ–‡ä»¶æ‰¹é‡å¤„ç†
- æ§åˆ¶æ˜¾ç¤ºçš„æœ€å¤§å±‚çº§æ·±åº¦ï¼ˆå¦‚ä»…æ˜¾ç¤ºåˆ° 1.1ï¼‰

---

## ğŸ§  åŠŸèƒ½æ¦‚è§ˆ

- âœ… æ”¯æŒæ‰¹é‡è¯»å– `csv_files/` æ–‡ä»¶å¤¹å†…çš„å¤šä¸ª `.csv` æ–‡æ¡£
- âœ… è‡ªåŠ¨æå–æ ‡é¢˜çš„å±‚çº§ç¼–å·ï¼Œå¦‚ `1`, `1.1`, `1.1.1` ç­‰
- âœ… æ„å»ºæ®µè½ä¹‹é—´çš„â€œåŒ…å«â€å±‚çº§å…³ç³»ï¼Œå¹¶å…³è”æºæ–‡æ¡£
- âœ… ç”Ÿæˆå¸¦æ ‡é¢˜ã€å†…å®¹è¯´æ˜çš„äº¤äº’å¼çŸ¥è¯†å›¾è°±ï¼ˆHTMLï¼‰
- âœ… æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æœ€å¤§æ˜¾ç¤ºå±‚çº§
- âœ… å®Œæ•´ä¸­æ–‡æ”¯æŒï¼Œä¸ä¹±ç ä¸æŠ¥é”™

---

## ğŸ“ è¾“å…¥æ ¼å¼è¯´æ˜

è¾“å…¥æ–‡ä»¶å¤¹ï¼š`csv_files/`

æ¯ä¸ª CSV æ–‡ä»¶éœ€åŒ…å«ä»¥ä¸‹æ ¼å¼ï¼ˆ**ä¸éœ€è¦æ ‡é¢˜è¡Œ**ï¼‰ï¼š

| æ ‡é¢˜              | å†…å®¹                      |
|-------------------|---------------------------|
| 1 é¡¹ç›®ä»‹ç»        | æœ¬æ–‡æ¡£ä¸»è¦ä»‹ç»â€¦â€¦         |
| 1.1 ç³»ç»Ÿç›®æ ‡      | ç³»ç»Ÿç›®æ ‡åŒ…æ‹¬â€¦â€¦           |
| 1.1.1 ç”¨æˆ·éœ€æ±‚åˆ†æ | åŒ…æ‹¬ç”¨æˆ·æƒé™ã€è§’è‰²ç­‰å†…å®¹ |
| 2 æŠ€æœ¯æ–¹æ¡ˆ        | é‡‡ç”¨BERTåµŒå…¥ã€æ·±åº¦å­¦ä¹ ç­‰  |

> æ³¨æ„ï¼šç¬¬ä¸€åˆ—å¿…é¡»æ˜¯å¸¦æœ‰ç±»ä¼¼â€œ1â€ã€â€œ1.1â€ã€â€œ1.1.1â€ç»“æ„çš„æ ‡é¢˜ï¼Œç¬¬äºŒåˆ—ä¸ºè¯¥æ®µæ­£æ–‡å†…å®¹ã€‚

---

## ğŸ“„ è¾“å‡ºç»“æœ

ç”Ÿæˆä¸€ä¸ªäº¤äº’å¼ HTML ç½‘é¡µå›¾è°±æ–‡ä»¶ï¼š

- æ–‡ä»¶åï¼š`knowledge_graph.html`
- ç‚¹å‡»å¯ç¼©æ”¾ã€æ‹–åŠ¨å›¾è°±
- é¼ æ ‡æ‚¬åœå¯æŸ¥çœ‹æ®µè½å†…å®¹
- èŠ‚ç‚¹åŒ…æ‹¬æ–‡æ¡£åã€æ ‡é¢˜ã€å­æ ‡é¢˜ç­‰
- æ”¯æŒè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨é¢„è§ˆï¼ˆå¯é€‰ï¼‰

---

## âš™ï¸ è‡ªå®šä¹‰å‚æ•°

ä½ å¯ä»¥ä¿®æ”¹è„šæœ¬ä¸­è¿™è¡Œæ¥é™åˆ¶æ˜¾ç¤ºçš„æœ€å¤§å±‚çº§ï¼ˆå¦‚åªæ˜¾ç¤º `1.1`ï¼‰ï¼š

```python
max_level = 2  # è®¾ç½®ä¸º1åªæ˜¾ç¤ºä¸€çº§æ ‡é¢˜ï¼Œè®¾ç½®ä¸º2åˆ™æ˜¾ç¤ºåˆ°1.1ï¼Œè®¾ç½®ä¸º3æ˜¾ç¤ºåˆ°1.1.1
````

---

## ğŸ”§ ä¾èµ–å®‰è£…

```bash
pip install pandas pyvis
```

---

## ğŸ“Œ ä½¿ç”¨æ–¹æ³•

```bash
python Graph_Mind_view.py
```

è¿è¡Œåå°†ç”Ÿæˆ `knowledge_graph.html`ï¼Œç”¨æµè§ˆå™¨æ‰“å¼€å³å¯æŸ¥çœ‹ã€‚

---

## Graph_Mind_view.pyä»£ç 
```python
import os
import pandas as pd
import re
from pyvis.network import Network

# è®¾ç½® CSV æ–‡ä»¶å¤¹è·¯å¾„
folder = 'csv_files'
dfs = []

# éå†æ–‡ä»¶å¤¹è¯»å–æ‰€æœ‰ CSV æ–‡ä»¶
for filename in os.listdir(folder):
    if filename.endswith('.csv'):
        try:
            file_path = os.path.join(folder, filename)
            df = pd.read_csv(file_path, encoding='utf-8', on_bad_lines='skip')
            df.columns = ['Title', 'Content']  # ç¡®ä¿åˆ—ä¸€è‡´
            df['Document'] = os.path.splitext(filename)[0]
            dfs.append(df)
        except Exception as e:
            print(f"è¯»å–å¤±è´¥: {filename}, é”™è¯¯: {e}")

# åˆå¹¶æ‰€æœ‰æ•°æ®
if not dfs:
    raise ValueError("æœªæ‰¾åˆ°ä»»ä½•æœ‰æ•ˆçš„ CSV æ–‡ä»¶ã€‚è¯·æ£€æŸ¥æ–‡ä»¶å¤¹è·¯å¾„å’Œå†…å®¹ã€‚")

df_all = pd.concat(dfs, ignore_index=True)

# æå–æ ‡é¢˜ç¼–å·ï¼ˆå¦‚ 1ã€1.1ã€1.1.1ï¼‰
def extract_level(title):
    if isinstance(title, str):
        match = re.match(r'^(\d+(\.\d+)*)', title.strip())
        return match.group(1) if match else None
    return None

df_all['Level'] = df_all['Title'].apply(extract_level)
df_all = df_all.dropna(subset=['Level'])

# é¿å… float ç±»å‹ content å¯¼è‡´æŠ¥é”™
df_all['Content'] = df_all['Content'].astype(str).fillna("")

# è®¾ç½®æœ€å¤§å±‚çº§ï¼ˆå¦‚ 2 è¡¨ç¤ºåªæ˜¾ç¤ºåˆ° 1.1ï¼‰
max_level = 2

# åˆ›å»º pyvis å›¾
net = Network(height='750px', width='100%', directed=True, font_color='black', notebook=False)
net.force_atlas_2based()

# æ·»åŠ èŠ‚ç‚¹å’Œè¾¹
for _, row in df_all.iterrows():
    doc = str(row['Document'])
    title = str(row['Title'])
    content = str(row['Content']) if pd.notna(row['Content']) else ""
    level_code = str(row['Level'])

    # å±‚çº§æ§åˆ¶
    level_parts = level_code.split('.')
    if len(level_parts) > max_level:
        continue

    # å½“å‰èŠ‚ç‚¹
    current_node = f"{level_code} {title}"
    net.add_node(current_node, label=title, title=content)

    # çˆ¶èŠ‚ç‚¹
    if len(level_parts) == 1:
        parent_node = doc
        net.add_node(parent_node, label=doc, title=f"æ–‡æ¡£ï¼š{doc}")
    else:
        parent_code = '.'.join(level_parts[:-1])
        parent_row = df_all[df_all['Level'] == parent_code]
        parent_title = parent_row['Title'].values[0] if not parent_row.empty else parent_code
        parent_node = f"{parent_code} {parent_title}"

    net.add_edge(parent_node, current_node)

# ç”Ÿæˆäº¤äº’å¼ HTML æ–‡ä»¶
output_path = 'knowledge_graph.html'
net.write_html(output_path)
print(f"âœ… äº¤äº’å¼çŸ¥è¯†å›¾è°±å·²æˆåŠŸç”Ÿæˆï¼š{output_path}ï¼Œè¯·ç”¨æµè§ˆå™¨æ‰“å¼€æŸ¥çœ‹ã€‚")

```
